<!DOCTYPE html>
<html>
<!-- 
	 RED INTERACTIVE AGENCY

	 index.html[MSNBC | Breaking_News | Contextual_Multi_renamed_by_AdApp | Velvet | VELVET | 1242x332 | 1.0]

	 BUILD SOURCE: Velvet - Base / OPTIONS: RED Analytics / AdApp: 1.5.55 / AdHtml: v2.8.1 / Created: 10/04/17 10:08am
	 DEPLOYED by AdApp: 3.2.0, 07/25/19 10:39am

	 RUN-PATH: ""

	 DEBUG OPTIONS:
	   1) Test locally using the "to_debug/" index.

	   2) Force this "to_cdn" index to use "debug" environment paths:
	       FTP "to_debug/" content to (debug env's run-path, modify as needed):
	        - http://red.ff0000-cdn.net/_debug/msnbc/2019/breaking_news/contextual_multi_renamed_by_adapp/velvet/VELVET/1242x332/
	       THEN:
	        - reload with query-string `?debug=true`
	        - OR set window-param `var debug = true;`
-->
<head>
    <meta name="viewport" content="initial-scale = 1.0,maximum-scale = 1.0" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta content="utf-8" http-equiv="encoding" />
    <title>RED[MSNBC | Breaking_News | Contextual_Multi_renamed_by_AdApp | Velvet | 1242x332 | 1.0]</title>
    <script type="text/javascript">
			var debug = false;
      var clickTag = "http://msnbc.com/";
      var adParams = {
        networkId: "VELVET",
        forceHttps: true,
        adWidth: window.innerWidth,
        adHeight:
          window.innerWidth >= 414
            ? Math.floor((window.innerWidth * 100) / 414)
            : Math.floor((window.innerWidth * 100) / 375),
        appleNewsSize: "1242x332",
        environmentId: "velvet",
        politeLoadAfter: 1,
        failoverOnError: true,
        dateSettings: {
          dateOverride: null,
        },
        velvet: {
          client: "yIG72AFrQw",
          locale: "mAmzU4WwkZ",
          segment: "PkZFYXDRh8",
          campaign: "j0pyJkOAXQ"
        },
        redAnalytics: {
          serverUrl: "http://sw1-ads.ff0000.com/",
          clientId: "16",
          campaignId: "39",
          adName: "Evergreen - Image",
          clock: new Date().getTime(),
          stages: {
            INITIAL: "initial",
            ANIMATION: "animation",
            COMPLETE: "complete",
            FAILOVER: "failover"
          }
        }
      };
			var assets = {
				preloader: {
					backgroundColor: "#1c1c1c",
					images: [{
						source: "logo_preloader.png"
					}]
				},
				failover: {
					images: [{
						source: "backup.jpg"
					}]
				},
				images: [],
				fonts: [],
				payload: {
					text: ["js_payload.min.js","core.js","ad.js"],
					binary: ["fba_payload.png"]
				}
			};
      assets.preloader.images[0].scale = adParams.adWidth / 1242;
      var environments = [{
					id				: "velvet",
					runPath			: "",
					adPath			: "",
				},
				{
					id				: "debug",
					runPath			: "http://red.ff0000-cdn.net/_debug/msnbc/2019/breaking_news/contextual_multi_renamed_by_adapp/velvet/VELVET/1242x332/",
					adPath			: "",
				}
			];
      var includes = function() {
        return [];
      };
      var externalIncludes =[
			];
      var runtimeIncludes ={
			};
      var views = function() {
        return[];
      };
      function onImpression() {
      }
      function isDevEnvironment() {
        return (
          adParams.environmentId == "debug" ||
          window.location.href.match(/[0-9]+\.[0-9]+\.[0-9]+\.[0-9]+:[0-9]+/)
        );
      }
    </script>
    <style type="text/css">
      html,
      body,
      #view {
        width: 100%;
        height: 100%;
      }
      body {
        margin: 0px;
        outline: none;
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
      }
    </style>
    <style type="text/css" id="RED_uiBorder">
      .ui-border {
        position: absolute;
        top: 0px;
        left: 0px;
        width: 100%;
        height: 100%;
        border-width: 0px;
        border-style: solid;
        box-sizing: border-box;
        -moz-box-sizing: border-box;
        -webkit-box-sizing: border-box;
      }
    </style>
  </head>
  <body>
    <div id="redMainContainer">
      <div id="redAdContainer"></div>
      <div id="redAuxContainer">
        <div id="preloader" class="ui-border"></div>
        <div id="fail"></div>
      </div>
    </div>
    <a id="anchor" style="display:block;height:100vh;width:100vw;z-index:10">
    </a>
    <script type="text/javascript">function getAdPath(){if(location.href.indexOf("flashtalking.com")>-1){return"https://cdn.flashtalking.com/"+myFT.get("cID")+"/"+myFT.get("creativeID")+"/"}else{return""}}var anchor=document.getElementById("anchor");if(anchor){anchor.href=clickTag}environments.forEach(function(t){if(t.id==="velvet"){t.adPath=getAdPath()}});</script>
    <script type="text/javascript">function isIphonePlus(){return window.innerWidth===414||window.innerWidth===736}function failAd(){document.getElementById("redAdContainer").style.display="none";document.getElementById("redAuxContainer").style.display="block";document.body.style="width: "+adParams.failoverWidth+"px; height: "+adParams.failoverHeight+"px; overflow: hidden;";document.getElementById("fail").style.cssText="position: absolute; "+"width: "+adParams.failoverWidth+"px; height: "+adParams.failoverHeight+"px; "+"left:"+adParams.failoverX+"px; top:"+adParams.failoverY+"px; "+"background-image: url("+adParams.adPath+assets.failover.images[0].source+"); background-size: contain; overflow: hidden; ";trackImpression(adParams.redAnalytics.stages.FAILOVER)}</script>
    <script type="text/javascript">var global=this;var View={};var Network,async,queryParams,adData;init();function init(){prepareScope();preparePreload();prepareDebug()}function prepareScope(){prepareAsync();preparePolite();queryParams=getQueryParams();if(adParams.failoverOnError)window.onerror=handleError;adParams.requestedEnvironmentId=adParams.environmentId;prepareEnvironment(getDeployProfile(adParams.requestedEnvironmentId))}function prepareAsync(){async=new Async;async.onComplete(prepareAssetLoad)}function preparePolite(){async.wait();function e(){var e=isDevEnvironment()?0:adParams.politeLoadAfter;setTimeout(function(){async.done()},e*1e3)}if(/comp|inter|loaded/.test(document.readyState)){e()}else{document.addEventListener("DOMContentLoaded",function(a){e()})}}function handleError(){window.onerror=function(){};failAd()}function preparePreload(){prepareAdParams();checkForAdTagParams();addContainerStyles();preparePreloader();prepareNetwork();onImpression();prepareRedAnalytics()}function prepareAdParams(){adParams.adSize=adParams.adWidth+"x"+adParams.adHeight;adParams.failoverWidth=adParams.preloaderWidth=adParams.adWidth;adParams.failoverHeight=adParams.preloaderHeight=adParams.adHeight;adParams.failoverX=adParams.preloaderX=0;adParams.failoverY=adParams.preloaderY=0}function checkForAdTagParams(){for(var e in queryParams){var a=queryParams[e].replace(/^\{/,"").replace(/\}$/,"");if(a!=""){global[e]=a}}}function addContainerStyles(){var e=document.getElementById("redMainContainer");e.style.cssText="position: relative;";var a="width: "+adParams.adWidth+"px; height: "+adParams.adHeight+"px; ";if(adParams.responsive){a="width: 100%; height: 100%; ";e.style.cssText+=a}document.getElementById("redAdContainer").style.cssText="position: absolute; left: 0px; top: 0px; "+a+"opacity: 0; overflow: hidden; -webkit-user-select: none; -moz-user-select: none; user-select: none"}function preparePreloader(){var e=assets.preloader;var a=document.getElementById("preloader");var t=e.borderWidth||0;var r;var n=0;var o=function(){if(assets.preloader.startDelay>0)setTimeout(async.done.bind(async),assets.preloader.startDelay);else async.done()};var i=function(){s.wait();var o=e.images[n];var l=new Image;if(!o.offset)o.offset={x:0,y:0};l.onload=function(d){l.width*=o.scale||1;l.height*=o.scale||1;var c=Math.round((adParams.preloaderWidth-l.width)/2+(o.offset.x||0)-t);var p=Math.round((adParams.preloaderHeight-l.height)/2+(o.offset.y||0)-t);r="position: absolute; left: "+c+"px; top: "+p+"px;";l.style.cssText=r;a.appendChild(l);if(++n<e.images.length){i()}else{if(adParams.responsive)r="width: 100%; height: 100%; ";else r="width: "+adParams.preloaderWidth+"px; height: "+adParams.preloaderHeight+"px; ";a.style.cssText="overflow: hidden; position: absolute; "+"top:"+adParams.preloaderY+"px; left:"+adParams.preloaderX+"px; "+r+"border-color: "+(e.borderColor||e.backgroundColor)+"; border-width: "+t+"px; background-color: "+e.backgroundColor+"; "}s.done()};l.src=adParams.imagesPath+o.source+"?="+Date.now()};var s=new Async;s.onComplete(o);async.wait();i()}function removePreloader(){var e=document.getElementById("preloader");if(e){var a=document.getElementById("redAuxContainer");a.style.display="none";a.removeChild(e)}}function prepareNetwork(){Network=new function(){this.exit=function(e){window.open(e,"_blank")};this.appendMacro=function(e,a){if(e.search(/^%%/)>-1)return a;else return e+a}}}function makeAuxClickable(){var e=document.getElementById("redAuxContainer");e.addEventListener("click",handleAuxClick)}function handleAuxClick(e){var a=e.changedTouches?e.changedTouches[0]:e;var t={mouse:{global:{x:a.pageX,y:a.pageY}}};Network.exit(clickTag);if(adParams.redAnalytics)trackExit(t)}function prepareRedAnalytics(){adParams.redAnalytics.impressionId=getImpressionId();trackImpression(adParams.redAnalytics.stages.INITIAL)}var trackingStage;function trackImpression(e){}function trackExit(e){}function wait(e){var a=(new Date).getTime();while((new Date).getTime()<a+e);}function doRedReport(e,a){var t=new XMLHttpRequest;var r=adParams.redAnalytics;var n="";if(typeof a!=="undefined"){n="&coords="+a.x+"x"+a.y}e=matchProtocolTo(r.serverUrl+r.clientId+"/"+r.campaignId+"/"+(r.adName+":"+trackingStage+"/"+adParams.environmentId+"/"+adParams.adSize).replace(/\s/g,"_")+"/"+e+"?iid="+r.impressionId+n);t.open("GET",e,true);t.send(null)}function getImpressionId(){return(new Date).getTime()+""+Math.random()}function prepareEnvironment(e){adParams.environmentId=e.id;adParams.runPath=matchProtocolTo(e.runPath);adParams.corePath=adParams.runPath+("corePath"in e?e.corePath:"_adlib/core/");adParams.commonPath=adParams.runPath+("commonPath"in e?e.commonPath:"_adlib/common/");adParams.jsPath=adParams.commonPath+("jsPath"in e?e.jsPath:"js/");"jsPath"in e?e.jsPath:"js/";adParams.loaderPath=adParams.jsPath;adParams.fontsPath=adParams.commonPath+("fontsPath"in e?e.fontsPath:"fonts/");adParams.adPath=adParams.runPath+e.adPath;adParams.imagesPath=adParams.adPath+("imagesPath"in e?e.imagesPath:"images/");adParams.videosPath=adParams.adPath+("videosPath"in e?e.videosPath:"videos/")}function traceDeployProfile(){var e=Array(120).join("-")}function prepareDebug(){var e;if(typeof debug!="undefined"&&typeof debug!="function"){e='via window-param "var debug = '+debug+';"'}else if("debug"in queryParams){e='via query-string "?debug='+debug+'"';debug=queryParams.debug.match(/^(true|yes|t|y|1)/i)!=null}else{debug=true}if(e){if(debug){var a=getDeployProfile("debug");prepareEnvironment(a);traceDeployProfile();console.log(" - DEBUG MODE ON, "+e);console.log('    * requires "to_debug/" content is at: "'+a.runPath+'"')}else{prepareEnvironment(getDeployProfile(adParams.requestedEnvironmentId));traceDeployProfile()}}else{traceDeployProfile()}}function prepareAssetLoad(){prepareDependencies();prepareExternalDependencies();concatDependencies();loadDependencies()}function prepareDependencies(){adParams.dependencies=[];adParams.optionalDependencies=[]}function prepareExternalDependencies(){adParams.externalDependencies=["https://cdn.flashtalking.com/frameworks/js/gsap/1.18.0/plugins/CSSPlugin.min.js","https://cdn.flashtalking.com/frameworks/js/gsap/1.18.0/easing/EasePack.min.js","https://cdn.flashtalking.com/frameworks/js/gsap/1.18.0/TweenLite.min.js"]}function concatDependencies(){assets.payload.text=assets.payload.text.filter(function(e){var a=e.indexOf(".min.")==-1;if(debug&&a||!debug&&!a)return true;else return false});assets.payload.text=assets.payload.text.map(function(e){return adParams.adPath+e});adParams.dependencies=adParams.dependencies.concat(adParams.optionalDependencies).concat(includes.call()).concat(assets.payload.text).concat(adParams.externalDependencies).concat(externalIncludes)}function loadLoader(){global.addEventListener("loaderControllerReady",loadDependencies);var e=document.createElement("script");e.type="text/javascript";e.onerror=failAd;e.src=adParams.loaderPath+"LoaderController.js";document.getElementsByTagName("head")[0].appendChild(e)}var fbaContent;function loadDependencies(){var e=new Async;e.onComplete(prepareCore);e.wait();var a=new Loader(adParams.dependencies,{name:"jsLoader",onComplete:e.done,onFail:failAd,scope:global});if(assets.payload.binary.length){e.wait();var t=new Loader(adParams.adPath+assets.payload.binary[0],{name:"fbaLoader",scope:global,fileType:"fba",onFail:failAd,onComplete:function(a){new Loader(a,{name:"fbaContentLoader",scope:global,onFail:failAd,onComplete:function(a){fbaContent=a;e.done()}}).load()}});t.load()}a.load()}function prepareCore(){PrepareCore.init(prepareCommon,fbaContent)}function prepareCommon(){PrepareCommon.init(prepareBuild)}function prepareBuild(){Control.prepareBuild()}function getDeployProfile(e){for(var a=0;a<environments.length;a++){if(environments[a].id===e)return environments[a]}return false}function getQueryParams(){var e={};var a=window.location.href.split("?");if(a.length>1){var t=a[1].split("&");for(var r in t){var n=t[r].split("=");if(n.length==2)e[n[0]]=decodeURIComponent(n[1])}}return e}function matchProtocolTo(e){if(e.search(/^http/)>-1){var a=window.location.href.search(/^https/)>-1||adParams.forceHttps;var t=a?"https://":"http://";if(e.search(/.*edgecastcdn/)>-1){var r=a?"ne1."+e.match(/w(a|p)c/i)[0]+".":e.match(/w(a|p)c\.[a-z0-9]*\./i)[0];e=t+r+"edgecastcdn"+e.replace(/.*edgecastcdn/,"")}else if(e.search(/.*paramount\.com/)>-1){var n=a?"paramountdlds-a.akamaihd.net":"downloads.paramount.com";e=t+n+e.replace(/.*paramount\.com/,"")}else if(e.search(/espn\.go\.com/)>-1||e.search(/secure\.espncdn\.com/)>-1){e="https://secure.espncdn.com"+e.replace(/^.*\.com/,"")}else{e=e.replace(/^https?\:\/\//i,t)}}else if(e.search(/^\/\/cdn\.flashtalking\.com/)>-1){e="https:"+e}return e}function trace(){if(console&&(typeof debug=="undefined"||debug)){var e=["RED[1242x332|1.0] "];for(var a=0;a<arguments.length;a++)e.push(arguments[a]);Function.prototype.apply.call(console.log,console,e)}}function getStaticSchedule(){return StaticGenerator.schedule}function Async(){var e=this;e.tokens=[];e.callback;e.wait=function(){e.tokens.push(1)};e.done=function(){e.tokens.pop();if(e.tokens.length==0)e.callback.call()};e.onComplete=function(a){e.callback=a}}Polyfills=new function(){try{new CustomEvent("test")}catch(e){function CustomEvent2(e,a){a=a||{bubbles:false,cancelable:false,detail:undefined};var t=document.createEvent("CustomEvent");t.initCustomEvent(e,a.bubbles,a.cancelable,a.detail);return t}CustomEvent2.prototype=window.Event.prototype;window.CustomEvent=CustomEvent2}};function LoaderTicker(){var e=this;e._setTicker=function(a){var t=document.createElement("div");t.innerHTML=a.content;t.style.cssText=a.css||"";document.body.appendChild(t);var r=a.width!=undefined?a.width:t.offsetWidth;t.style.fontFamily=a.font||"";var n=setTimeout(function(){clearInterval(o);e._handleFail()},5e3);var o=setInterval(function(){if(t.offsetWidth!=r){clearTimeout(n);clearInterval(o);e._handleTickerComplete(t)}},10)},e._removeTickerNode=function(e){e.parentNode.removeChild(e)}}function LoaderBase(){var e=this;var a=arguments&&arguments.length>1?arguments[1]:arguments[0]||{};e.onComplete=a.onComplete||function(){};e.onFail=a.onFail||function(){};e.onProgress=a.onProgress||function(){};e.name=a.name||"";e.scope=a.scope||e;e.dataRaw;e.cacheBuster=a.cacheBuster||false;e._failCalled=false;e._handleFail=function(){if(!e._failCalled){e._failCalled=true;e.onFail.call(e.scope,e)}}}function LoaderSource(){var e=this;var a=arguments&&arguments.length>1?arguments[1]:arguments[0]||{};e.url=global.matchProtocolTo(arguments[0]||"");if(a.platformGetUrl){e.platformGetUrl=a.platformGetUrl;e.url=a.platformGetUrl(e.url)}e.fileName=a.id===undefined?LoaderUtils.getFileName(e.url):a.id;e.fileType=a.fileType||LoaderUtils.getFileType(e.url)}var LoaderUtils=new function(){var e=this;e.createXMLHttpRequest=function(){try{return new XMLHttpRequest}catch(e){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(e){}alert("XMLHttpRequest not supported");return null};e.getFileName=function(e){var a=e.lastIndexOf(".");var t=e.lastIndexOf("/")+1;if(t>a)a=undefined;return e.substring(t,a)};e.getFontName=function(e){return e.substring(e.lastIndexOf("/")+1,e.indexOf("."))};e.getFileType=function(e){e=e||"";var a=e.indexOf("?");if(a>-1){e=e.substr(0,a)}var t=e.match(/[^\\]*\.(\w+)$/);var r=e.match(/image\/(jpeg|jpg|png)/);var n=t?t[1]:r?r[1]:"unknown";return n};e.getFullUrl=function(e,a,t){var r=LoaderUtils._getUrlPrepend(e);var n=global.matchProtocolTo(r+_file);if(t){n=t(n)}return url};e.getUrlPrepend=function(e){return e?e.replace(/\/?$/,"/"):""};e.getParamsFromData=function(e){if(typeof e==="string"){return e}else{var a="";for(var t in e){a+=t+"="+e[t]+"&"}return a.substr(0,a.length-1)}}};function InlineLoader(){var e=this;LoaderSource.apply(e,arguments);LoaderBase.apply(e,arguments)}InlineLoader.prototype={load:function(){var e=this;var a=e.fileType=="css"?e._createLink():e._createScript();a.charset="utf-8";a.onload=e._handleComplete.bind(e);a.onerror=e._handleFail;e.fileType=="css"?a.href=this.url:a.src=e.url;document.getElementsByTagName("head")[0].appendChild(a)},_createScript:function(){var e=document.createElement("script");e.type="text/javascript";return e},_createLink:function(){var e=document.createElement("link");e.rel="stylesheet";e.type="text/css";return e},_handleComplete:function(e){var a=this;a.dataRaw=e.target;a.onComplete.call(a.scope,a)}};InlineLoader.prototype.constructor=InlineLoader;LoaderSource.call(InlineLoader.prototype);LoaderBase.call(InlineLoader.prototype);function DataLoader(){var e=this;LoaderSource.apply(e,arguments);LoaderBase.apply(e,arguments);var a=arguments&&arguments.length>1?arguments[1]:arguments[0]||{};e.method=(a.method||"get").toLowerCase();e.query=a.query||null;e.responseType=a.responseType||null}DataLoader.prototype={load:function(){var e=this;var a=null;var t=e.method==="post";e.req=LoaderUtils.createXMLHttpRequest();if(e.responseType!=undefined)e.req.responseType=e.responseType;var r=e.url;if(e.query){a=LoaderUtils.getParamsFromData(e.query);encodeURIComponent(a);if(!t){r+="?"+a;a=null}}if(e.cacheBuster){r+=e.query&&!t?"&":"?";r+="cb="+(new Date).getTime()}e.req.onreadystatechange=e._handleStateChange.bind(e);e.req.open(e.method,r,true);switch(e.fileType){case"xml":if(e.req.overrideMimeType)e.req.overrideMimeType("text/xml");break;case"json":if(e.req.overrideMimeType)e.req.overrideMimeType("application/json");break;case"fba":case"bin":case"binary":e.responseType=e.req.responseType="arraybuffer";break}if(e.method==="post"){e.req.setRequestHeader("Content-type","application/x-www-form-urlencoded")}e.req.send(a)},_handleStateChange:function(e){var a=this;switch(a.req.readyState){case 3:if(this.req.status==200){a.dataRaw=a.responseType?a.req.response:a.req.responseText;a._handleProgress(a)}break;case 4:if(a.req.status==200){a.dataRaw=a.responseType?a.req.response:a.req.responseText;a._handleComplete(a)}else{a._handleFail({target:e})}break}},_handleProgress:function(){var e=this;e.onProgress.call(e.scope,e)},_handleComplete:function(){var e=this;e.onComplete.call(e.scope,e)}};DataLoader.prototype.constructor=DataLoader;LoaderSource.call(DataLoader.prototype);LoaderBase.call(DataLoader.prototype);function ImageLoader(){var e=this;LoaderSource.apply(e,arguments);LoaderBase.apply(e,arguments);LoaderTicker.apply(e,arguments);var a=arguments&&arguments.length>1?arguments[1]:arguments[0]||{};e.renderOnly=!!a.renderOnly;e.crossOrigin=a.crossOrigin}ImageLoader.prototype={load:function(){var e=this;if(e.renderOnly){e._setTicker({content:e.url,width:0})}else{var a=new Image;a.id=e.fileName;a.crossOrigin=e.crossOrigin;a.onload=e._handleComplete.bind(e);a.onerror=e._handleFail;a.src=e.url}},_handleTickerComplete:function(e){var a=this;var t=e.childNodes;for(var r=0;r<t.length;r++){var n=t[r];if(n instanceof SVGElement){n.id=a.fileName;break}}a._handleComplete({target:n});a._removeTickerNode(e)},_handleComplete:function(e){var a=this;a.dataRaw=e.target;a.onComplete.call(a.scope,a)}};ImageLoader.prototype.constructor=ImageLoader;LoaderSource.call(ImageLoader.prototype);LoaderBase.call(ImageLoader.prototype);LoaderTicker.call(ImageLoader.prototype);function FontLoader(){var e=this;LoaderSource.apply(e,arguments);LoaderBase.apply(e,arguments);LoaderTicker.apply(e,arguments)}FontLoader.prototype={load:function(){var e=this;e.fileName=e.fileName.split(".")[0];var a="@font-face { font-family: "+e.fileName+"; src: url("+e.url+") format('truetype'); }";var t=document.getElementById("RED_fontStyleSheet");if(t){t.innerHTML+=a}else{var r=document.createElement("style");r.type="text/css";r.media="screen";r.id="RED_fontStyleSheet";r.appendChild(document.createTextNode(a));document.getElementsByTagName("head")[0].appendChild(r)}e._setTicker({content:" !\"\\#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[]^_`abcdefghijklmnopqrstuvwxyz{|}~",css:"position:absolute; top:-1000px; font-size:100px; font-family:san-serif; font-variant:normal; font-style:normal; font-weight:normal; letter-spacing:0; white-space:nowrap;",font:e.fileName})},_handleTickerComplete:function(e){var a=this;setTimeout(function(){a._removeTickerNode(e)},300);a._handleComplete()},_handleComplete:function(e){var a=this;a.dataRaw=a.fileName;a.onComplete.call(a.scope,a)}};FontLoader.prototype.constructor=FontLoader;LoaderSource.call(FontLoader.prototype);LoaderBase.call(FontLoader.prototype);LoaderTicker.call(FontLoader.prototype);function FbvLoader(){var e=this;DataLoader.apply(e,arguments);var a=arguments&&arguments.length>1?arguments[1]:arguments[0]||{};e.onSpecs=a.onSpecs||function(){};e.available=0;e.images=[];e.isBytesLoaded=false;e._imagesRaw=[];e._prev=-1;e._specs;e._byteLength=0;e._byteBuffer=3e3;e._imageRequestMax=6;e._imageRequestExcess=false}FbvLoader.prototype=Object.create(DataLoader.prototype);FbvLoader.prototype.constructor=FbvLoader;FbvLoader.prototype._handleProgress=function(e){var a=this;if(a._imageRequestExcess&&!a.isBytesLoaded){a._manageImageCreate();return}var t=e.dataRaw.length-a._byteLength;a._byteLength=e.dataRaw.length;if(t<a._byteBuffer&&t>0&&a._specs){return}a._imagesRaw=e.dataRaw.split(":::");if(a._imagesRaw.length>1){var r=a._imagesRaw[0].split(";;;");if(!a._specs){a._specs=JSON.parse(r[0]);a.onSpecs.call(a.scope,a)}a._imagesRaw[0]=r[1];a._manageImageCreate()}};FbvLoader.prototype._manageImageCreate=function(){var e=this;var a=e._imagesRaw.length;if(!e.isBytesLoaded){a-=2}var t=a-e._prev;var r=e._prev-e.available;if(r>e._imageRequestMax){e._imageRequestExcess=true;return}if(t>e._imageRequestMax){e._imageRequestExcess=true;a=a-t+e._imageRequestMax}else{e._imageRequestExcess=false}for(var n=e._prev;n<a;n++){e._imageCreateStart(n)}if(e._imageRequestExcess){e._prev=a}else{e._prev=e._imagesRaw.length-2}};FbvLoader.prototype._imageCreateStart=function(e){if(e<0)return;var a=this;if(a.images[e]){return}var t=a._imagesRaw[e].split(")");a.images[e]={dataRaw:t};var r="data:image/jpg;base64,"+t[1];new ImageLoader(r,{id:e,scope:a,fileType:"jpg",onComplete:a._handleImageLoadComplete,onFail:function(e){}}).load()};FbvLoader.prototype._handleImageLoadComplete=function(e){var a=this;var t=e.dataRaw;a.images[t.id].image=t;a.available++;var r=a.available/a._specs.frames;a.onProgress.call(a.scope,a,t);if(a.isBytesLoaded&&a._imageRequestExcess){if(a.available+a._imageRequestMax>=a._prev){a._manageImageCreate()}}if(+t.id===a._specs.frames-1){a.onComplete.call(a.scope,a)}};FbvLoader.prototype._handleComplete=function(e){var a=this;a.isBytesLoaded=true;a._handleProgress(e)};function ViewLoader(){var e=this;LoaderBase.apply(e,arguments);var a=arguments&&arguments.length>1?arguments[1]:arguments[0]||{};e.viewPaths=arguments[0]}ViewLoader.prototype={load:function(){var e=this;if(!e.viewPaths.length){e.onComplete.call(e.scope,e);return}var a=0;for(var t in e.viewPaths){new DataLoader(e.viewPaths[t],{fileType:"text/html",onComplete:function(t){e.processLoadedView(t);a++;if(a===e.viewPaths.length){e.onComplete.call(e.scope,e)}}}).load()}},processLoadedView:function(e){var a="";var t=new RegExp("<style[^>]*>(.*)</style>","g");while(match=t.exec(e.dataRaw)){a+=match[i]}var r=e.dataRaw.replace(t,"").trim();global.Views[e.fileName]=r;global.ViewStyles[e.fileName]=a}};ViewLoader.prototype.constructor=ViewLoader;function Loader(){var e=this;LoaderBase.apply(e,arguments);var a=arguments&&arguments.length>1?arguments[1]:arguments[0]||{};e._queue={};e._total=0;e._active=false;e._startedCount=0;e.prepend=a.prepend||"";e.platformGetUrl=a.platformGetUrl;e.fileType=a.fileType||null;e.content=[];e.crossOrigin=a.crossOrigin||undefined;e.add(arguments[0])}Loader.prototype.constructor=Loader;LoaderBase.call(Loader.prototype);Loader.prototype={add:function(e){var a=this;if(typeof e==="string"){a._addSingleLoad(e)}else if(e instanceof Array){for(var t=0;t<e.length;t++){a._addSingleLoad(e[t])}}else if(e instanceof Loader){if(e.content&&e.content[0]&&e.content[0].fileType=="fba"){a._addFbaSubLoads(e.content[0])}else{a._addSubLoad(e)}}},load:function(){var e=this;e._active=true;if(e._total<=0){}else{var a=false;var t="";for(var r in e._queue){if(!(e._queue[r]instanceof Loader)){if(!a){a=true;t+='Loader "'+e.name+'" requesting:'}var n=e._queue[r].fileName;var o=e._queue[r].fileType;var i=n.indexOf("."+o);var s=i>-1?n:n+"."+o;t+="\n\t -> "+(e._queue[r].prepend||"")+s}}}e._startSingleLoad(0)},getAllContent:function(){var e=[];function a(t){for(var r=0;r<t.length;r++){if(t[r]instanceof Loader){a(t[r].content)}else{e.push(t[r])}}}a(this.content);return e},getAllContentRaw:function(){var e=this.getAllContent();for(var a=0;a<e.length;a++){e[a]=e[a].dataRaw}return e},getLoader:function(e){var a=null;function t(r){for(var n=0;n<r.length;n++){if(r[n]instanceof Loader){if(r[n]&&(r[n].name===e||r[n]===e)){a=r[n]}else{t(r[n].content)}}}}t(this.content);return a},_addSingleLoad:function(e,a){var t=this;var r=a?a[1]:t.fileType||LoaderUtils.getFileType(e);var n;switch(r){case"jpg":case"jpeg":case"gif":case"png":case"svg":n="ImageLoader";break;case"ttf":case"woff":n="FontLoader";break;case"json":case"fba":case"bin":case"binary":n="DataLoader";break;case"fbv":n="FbvLoader";break;default:n="InlineLoader"}var e=a?e:t.prepend+e;var o=new global[n](e,{scope:t,platformGetUrl:t.platformGetUrl,onComplete:t._handleSingleLoadComplete,onFail:t._handleFail,fileType:r,cacheBuster:t.cacheBuster,crossOrigin:t.crossOrigin});if(a){o.fileName=a[0]}o.queueIndex=t._total;t._queue[t._total]=o;t._total++},_addSubLoad:function(e){var a=this;e.onComplete=a._handleSingleLoadComplete.bind(a);e.onProgress=a._handleProgress.bind(a);e.onFail=a._handleFail;e.queueIndex=a._total;a._queue[a._total]=e;a._total++},_addFbaSubLoads:function(e){var a=new Uint8Array(4);var t=new Uint32Array(a.buffer);var r=44;var n=new Uint8Array(e.dataRaw,r,1)[0];r+=5;for(var o=0;o<n;o++){var i=new Uint8Array(e.dataRaw,r,4);var s=4;for(var l=0;l<4;l++){a[--s]=i[l]}var d=t[0];r+=7;var c=String.fromCharCode(new Uint8Array(e.dataRaw,r++,1));var p=new Uint8Array(e.dataRaw,r+3,1);var u=p[0]||0;var f=new Uint8Array(e.dataRaw,r+4,u);var m=String.fromCharCode.apply(String,f);u+=4;var h=new Uint8Array(e.dataRaw,r+u,d-u);r+=d+4;var v=m.split(".");var g=c=="f"?"application/x-font-ttf":"image/"+(v[1]=="svg"?"svg+xml":v[1]);var y=new Blob([h],{type:g});var P=URL.createObjectURL(y);this._addSingleLoad(P,v)}},_startSingleLoad:function(e){var a=this;var t=a._queue[e];if(a._total==0){a._handleComplete()}else{if(e<a._total){if(!(t instanceof Loader)){if(e<a._total-1){a._startLoadTimeOut(++e)}}t.load()}}},_startLoadTimeOut:function(e){var a=this;setTimeout(function(){a._startSingleLoad(e)},10)},_handleSingleLoadComplete:function(e){var a=this;a.content[e.queueIndex]=e;delete a._queue[e.queueIndex];a._handleProgress();if(e.url==undefined){if(e.queueIndex<a._total-1){a._startLoadTimeOut(e.queueIndex+1)}}},_handleProgress:function(){var e=this;var a=e.content.length;var t=0;for(var r=0;r<a;r++){if(e.content[r])t++}var n=t;var o=0;if(t<e._total&&e._queue[t]){o=e._queue[t].progress/e._total||0}e.progress=n/e._total+o;e.rawProgress=t/e._total+o;e.onProgress.call(e.scope,e);if(t>=e._total){e._handleComplete()}},_handleComplete:function(){var e=this;e.onComplete.call(e.scope,e)}};</script>
  </body>
</html>
